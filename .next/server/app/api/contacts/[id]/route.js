(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[401],{3567:(a,b,c)=>{"use strict";let d;c.r(b),c.d(b,{ComponentMod:()=>Q,default:()=>R});var e,f={};c.r(f),c.d(f,{DELETE:()=>G,GET:()=>D,PATCH:()=>F,PUT:()=>E,runtime:()=>C});var g={};c.r(g),c.d(g,{handler:()=>N,patchFetch:()=>M,routeModule:()=>I,serverHooks:()=>L,workAsyncStorage:()=>J,workUnitAsyncStorage:()=>K});var h=c(8796),i=c(2771),j=c(3169),k=c(6558),l=c(3015),m=c(5208),n=c(7840),o=c(8558),p=c(502),q=c(6568),r=c(9127),s=c(6306),t=c(2225),u=c(5087),v=c(5925),w=c(7491),x=c(9092),y=c(691),z=c(3779),A=c(4716),B=c(8020);let C="edge";async function D(a,b){try{let{id:a}=await b.params,c=await (0,B.bl)(a);if(!c)return A.Rp.json({error:"Contact not found"},{status:404});return A.Rp.json(c)}catch(a){return console.error("GET /api/contacts/[id] error:",a),A.Rp.json({error:"Contact could not be loaded"},{status:500})}}async function E(a,b){try{let{id:c}=await b.params,d=await a.json(),e={};void 0!==d?.name&&(e.name=d.name),void 0!==d?.email&&(e.email=d.email),void 0!==d?.phone&&(e.phone=d.phone),void 0!==d?.company&&(e.company=d.company),void 0!==d?.position&&(e.position=d.position);let f=await (0,B.CI)(c,e);if(!f)return A.Rp.json({error:"Contact not found"},{status:404});return A.Rp.json(f)}catch(a){return console.error("PUT /api/contacts/[id] error:",a),A.Rp.json({error:"Contact could not be updated"},{status:500})}}async function F(a,b){return E(a,b)}async function G(a,b){try{let{id:a}=await b.params;return await (0,B.MO)(a),A.Rp.json({deleted:!0})}catch(a){return console.error("DELETE /api/contacts/[id] error:",a),A.Rp.json({error:"Contact could not be deleted"},{status:500})}}var H=c(5356).Buffer;let I=new k.AppRouteRouteModule({definition:{kind:l.A.APP_ROUTE,page:"/api/contacts/[id]/route",pathname:"/api/contacts/[id]",filename:"route",bundlePath:"app/api/contacts/[id]/route"},distDir:process.env.__NEXT_RELATIVE_DIST_DIR||"",relativeProjectDir:process.env.__NEXT_RELATIVE_PROJECT_DIR||"",resolvedPagePath:"/Users/alihan/Documents/GitHub/crm-spr/app/api/contacts/[id]/route.ts",nextConfigOutput:"",userland:f}),{workAsyncStorage:J,workUnitAsyncStorage:K,serverHooks:L}=I;function M(){return(0,m.V5)({workAsyncStorage:J,workUnitAsyncStorage:K})}async function N(a,b,c){I.isDev&&(0,n.Ul)(a,"devRequestTimingInternalsEnd",process.hrtime.bigint());let d="/api/contacts/[id]/route";"/index"===d&&(d="/");let e=await I.prepare(a,b,{srcPage:d,multiZoneDraftMode:!1});if(!e)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:f,params:g,nextConfig:j,parsedUrl:k,isDraftMode:m,prerenderManifest:A,routerServerContext:B,isOnDemandRevalidate:C,revalidateOnlyGenerated:D,resolvedPathname:E,clientReferenceManifest:F,serverActionsManifest:G}=e,J=(0,p.Y)(d),K=!!(A.dynamicRoutes[J]||A.routes[E]),L=async()=>((null==B?void 0:B.render404)?await B.render404(a,b,k,!1):b.end("This page could not be found"),null);if(K&&!m){let a=!!A.routes[E],b=A.dynamicRoutes[J];if(b&&!1===b.fallback&&!a){if(j.experimental.adapterPath)return await L();throw new y.G}}let M=null;!K||I.isDev||m||(M="/index"===(M=E)?"/":M);let N=!0===I.isDev||!K,O=K&&!N;G&&F&&(0,i.fQ)({page:d,clientReferenceManifest:F,serverActionsManifest:G,serverModuleMap:(0,h.e)({serverActionsManifest:G})});let P=a.method||"GET",Q=(0,o.EK)(),R=Q.getActiveScopeSpan(),S={params:g,prerenderManifest:A,renderOpts:{experimental:{authInterrupts:!!j.experimental.authInterrupts},cacheComponents:!!j.cacheComponents,supportsDynamicResponse:N,incrementalCache:(0,n.Ny)(a,"incrementalCache"),cacheLifeProfiles:j.cacheLife,waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:void 0,onInstrumentationRequestError:(b,c,d)=>I.onRequestError(a,b,d,B)},sharedContext:{buildId:f}},T=new q.j(a),U=new q.p(b),V=r.u_.fromNodeNextRequest(T,(0,r.SN)(b));try{let e=async a=>I.handle(V,S).finally(()=>{if(!a)return;a.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let c=Q.getRootSpanAttributes();if(!c)return;if(c.get("next.span_type")!==s.Li.handleRequest)return void console.warn(`Unexpected root span type '${c.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=c.get("next.route");if(e){let b=`${P} ${e}`;a.setAttributes({"next.route":e,"http.route":e,"next.span_name":b}),a.updateName(b)}else a.updateName(`${P} ${d}`)}),f=!!(0,n.Ny)(a,"minimalMode"),g=async g=>{var h,i;let k=async({previousCacheEntry:h})=>{try{if(!f&&C&&D&&!h)return b.statusCode=404,b.setHeader("x-nextjs-cache","REVALIDATED"),b.end("This page could not be found"),null;let d=await e(g);a.fetchMetrics=S.renderOpts.fetchMetrics;let i=S.renderOpts.pendingWaitUntil;i&&c.waitUntil&&(c.waitUntil(i),i=void 0);let j=S.renderOpts.collectedTags;if(!K)return await (0,u.I)(T,U,d,S.renderOpts.pendingWaitUntil),null;{let a=await d.blob(),b=(0,v.Cu)(d.headers);j&&(b[x.VC]=j),!b["content-type"]&&a.type&&(b["content-type"]=a.type);let c=void 0!==S.renderOpts.collectedRevalidate&&!(S.renderOpts.collectedRevalidate>=x.AR)&&S.renderOpts.collectedRevalidate,e=void 0===S.renderOpts.collectedExpire||S.renderOpts.collectedExpire>=x.AR?void 0:S.renderOpts.collectedExpire;return{value:{kind:z.yD.APP_ROUTE,status:d.status,body:H.from(await a.arrayBuffer()),headers:b},cacheControl:{revalidate:c,expire:e}}}}catch(b){throw(null==h?void 0:h.isStale)&&await I.onRequestError(a,b,{routerKind:"App Router",routePath:d,routeType:"route",revalidateReason:(0,t.c)({isStaticGeneration:O,isOnDemandRevalidate:C})},B),b}},n=await I.handleResponse({req:a,nextConfig:j,cacheKey:M,routeKind:l.A.APP_ROUTE,isFallback:!1,prerenderManifest:A,isRoutePPREnabled:!1,isOnDemandRevalidate:C,revalidateOnlyGenerated:D,responseGenerator:k,waitUntil:c.waitUntil,isMinimalMode:f});if(!K)return null;if((null==n||null==(h=n.value)?void 0:h.kind)!==z.yD.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==n||null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});f||b.setHeader("x-nextjs-cache",C?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),m&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let o=(0,v.p$)(n.value.headers);return f&&K||o.delete(x.VC),!n.cacheControl||b.getHeader("Cache-Control")||o.get("Cache-Control")||o.set("Cache-Control",(0,w.B)(n.cacheControl)),await (0,u.I)(T,U,new Response(n.value.body,{headers:o,status:n.value.status||200})),null};R?await g(R):await Q.withPropagatedContext(a.headers,()=>Q.trace(s.Li.handleRequest,{spanName:`${P} ${d}`,kind:o.v8.SERVER,attributes:{"http.method":P,"http.target":a.url}},g))}catch(b){if(b instanceof y.G||await I.onRequestError(a,b,{routerKind:"App Router",routePath:J,routeType:"route",revalidateReason:(0,t.c)({isStaticGeneration:O,isOnDemandRevalidate:C})}),K)throw b;return await (0,u.I)(T,U,new Response(null,{status:500})),null}}let O=null==(e=self.__RSC_MANIFEST)?void 0:e["/api/contacts/[id]/route"],P=(d=self.__RSC_SERVER_MANIFEST)?JSON.parse(d):void 0;O&&P&&(0,i.fQ)({page:"/api/contacts/[id]/route",clientReferenceManifest:O,serverActionsManifest:P,serverModuleMap:(0,h.e)({serverActionsManifest:P})});let Q=g,R=j.s.wrap(I,{nextConfig:{env:{},webpack:null,typescript:{ignoreBuildErrors:!1},typedRoutes:!1,distDir:".next",cleanDistDir:!0,assetPrefix:"",cacheMaxMemorySize:0x3200000,configOrigin:"next.config.mjs",useFileSystemPublicRoutes:!0,generateEtags:!0,pageExtensions:["tsx","ts","jsx","js"],poweredByHeader:!0,compress:!0,images:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:[{pathname:"**",search:""}],remotePatterns:[],qualities:[75],unoptimized:!1},devIndicators:{position:"bottom-left"},onDemandEntries:{maxInactiveAge:6e4,pagesBufferLength:5},basePath:"",sassOptions:{},trailingSlash:!1,i18n:null,productionBrowserSourceMaps:!1,excludeDefaultMomentLocales:!0,reactProductionProfiling:!1,reactStrictMode:!0,reactMaxHeadersLength:6e3,httpAgentOptions:{keepAlive:!0},logging:{},compiler:{},expireTime:31536e3,staticPageGenerationTimeout:60,modularizeImports:{"@mui/icons-material":{transform:"@mui/icons-material/{{member}}"},lodash:{transform:"lodash/{{member}}"}},outputFileTracingRoot:"/Users/alihan/Documents/GitHub/crm-spr",cacheComponents:!1,cacheLife:{default:{stale:300,revalidate:900,expire:0xfffffffe},seconds:{stale:30,revalidate:1,expire:60},minutes:{stale:300,revalidate:60,expire:3600},hours:{stale:300,revalidate:3600,expire:86400},days:{stale:300,revalidate:86400,expire:604800},weeks:{stale:300,revalidate:604800,expire:2592e3},max:{stale:300,revalidate:2592e3,expire:31536e3}},cacheHandlers:{},experimental:{useSkewCookie:!1,cssChunking:!0,multiZoneDraftMode:!1,appNavFailHandling:!1,prerenderEarlyExit:!0,serverMinification:!0,serverSourceMaps:!1,linkNoTouchStart:!1,caseSensitiveRoutes:!1,clientSegmentCache:!0,dynamicOnHover:!1,preloadEntriesOnStart:!0,clientRouterFilter:!0,clientRouterFilterRedirects:!1,fetchCacheKeyPrefix:"",proxyPrefetch:"flexible",optimisticClientCache:!0,manualClientBasePath:!1,cpus:7,memoryBasedWorkersCount:!1,imgOptConcurrency:null,imgOptTimeoutInSeconds:7,imgOptMaxInputPixels:0xfff8001,imgOptSequentialRead:null,imgOptSkipMetadata:null,isrFlushToDisk:!0,workerThreads:!1,optimizeCss:!1,nextScriptWorkers:!1,scrollRestoration:!1,externalDir:!1,disableOptimizedLoading:!1,gzipSize:!0,craCompat:!1,esmExternals:!0,fullySpecified:!1,swcTraceProfiling:!1,forceSwcTransforms:!1,largePageDataBytes:128e3,typedEnv:!1,parallelServerCompiles:!1,parallelServerBuildTraces:!1,ppr:!1,authInterrupts:!1,webpackMemoryOptimizations:!1,optimizeServerReact:!0,viewTransition:!1,removeUncaughtErrorAndRejectionListeners:!1,validateRSCRequestHeaders:!1,staleTimes:{dynamic:0,static:300},reactDebugChannel:!1,serverComponentsHmrCache:!0,staticGenerationMaxConcurrency:8,staticGenerationMinPagesPerWorker:25,inlineCss:!1,useCache:!1,globalNotFound:!1,browserDebugInfoInTerminal:!1,lockDistDir:!0,isolatedDevBuild:!0,proxyClientMaxBodySize:0xa00000,hideLogsAfterAbort:!1,mcpServer:!0,optimizePackageImports:["lucide-react","date-fns","lodash-es","ramda","antd","react-bootstrap","ahooks","@ant-design/icons","@headlessui/react","@headlessui-float/react","@heroicons/react/20/solid","@heroicons/react/24/solid","@heroicons/react/24/outline","@visx/visx","@tremor/react","rxjs","@mui/material","@mui/icons-material","recharts","react-use","effect","@effect/schema","@effect/platform","@effect/platform-node","@effect/platform-browser","@effect/platform-bun","@effect/sql","@effect/sql-mssql","@effect/sql-mysql2","@effect/sql-pg","@effect/sql-sqlite-node","@effect/sql-sqlite-bun","@effect/sql-sqlite-wasm","@effect/sql-sqlite-react-native","@effect/rpc","@effect/rpc-http","@effect/typeclass","@effect/experimental","@effect/opentelemetry","@material-ui/core","@material-ui/icons","@tabler/icons-react","mui-core","react-icons/ai","react-icons/bi","react-icons/bs","react-icons/cg","react-icons/ci","react-icons/di","react-icons/fa","react-icons/fa6","react-icons/fc","react-icons/fi","react-icons/gi","react-icons/go","react-icons/gr","react-icons/hi","react-icons/hi2","react-icons/im","react-icons/io","react-icons/io5","react-icons/lia","react-icons/lib","react-icons/lu","react-icons/md","react-icons/pi","react-icons/ri","react-icons/rx","react-icons/si","react-icons/sl","react-icons/tb","react-icons/tfi","react-icons/ti","react-icons/vsc","react-icons/wi"]},htmlLimitedBots:"[\\w-]+-Google|Google-[\\w-]+|Chrome-Lighthouse|Slurp|DuckDuckBot|baiduspider|yandex|sogou|bitlybot|tumblr|vkShare|quora link preview|redditbot|ia_archiver|Bingbot|BingPreview|applebot|facebookexternalhit|facebookcatalog|Twitterbot|LinkedInBot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|Yeti|googleweblight",bundlePagesRouterDependencies:!1,configFile:"/Users/alihan/Documents/GitHub/crm-spr/next.config.mjs",configFileName:"next.config.mjs",turbopack:{root:"/Users/alihan/Documents/GitHub/crm-spr"},distDirRoot:".next"}})},5356:a=>{"use strict";a.exports=require("node:buffer")},5521:a=>{"use strict";a.exports=require("node:async_hooks")},5681:()=>{},8020:(a,b,c)=>{"use strict";c.d(b,{CI:()=>o,Kd:()=>r,MO:()=>p,NE:()=>q,bl:()=>m,iG:()=>s,kK:()=>l,vY:()=>n});var d=c(5700);let e=new Map,f={get:async a=>e.get(a)??null,async put(a,b){"string"==typeof b?e.set(a,b):e.set(a,JSON.stringify(b))},async delete(a){e.delete(a)},async list(a){let b=a?.prefix??"";return{keys:Array.from(e.keys()).filter(a=>a.startsWith(b)).map(a=>({name:a})),list_complete:!0}}};function g(){try{let a=(0,d.getRequestContext)(),b=a?.env,c=b?.CRM_SPR_KV;if(c)return c}catch{}return f}let h="contact:",i="deal:";async function j(a,b){let c=await a.get(b);return c?JSON.parse(c):null}async function k(a,b,c){await a.put(b,JSON.stringify(c))}async function l(){let a=g(),b=await a.list({prefix:h}),c=[];for(let d of b.keys){let b=await j(a,d.name);b&&c.push(b)}return c}async function m(a){return j(g(),`${h}${a}`)}async function n(a){let b=g(),c=crypto.randomUUID(),d=new Date().toISOString(),e={...a,id:c,createdAt:d,updatedAt:d};return await k(b,`${h}${c}`,e),e}async function o(a,b){let c=g(),d=await m(a);if(!d)return null;let e={...d,...b,id:d.id,createdAt:d.createdAt,updatedAt:new Date().toISOString()};return await k(c,`${h}${a}`,e),e}async function p(a){let b=g();return await b.delete(`${h}${a}`),!0}async function q(a){return j(g(),`${i}${a}`)}async function r(a,b){let c=g(),d=await q(a);if(!d)return null;let e={...d,...b,id:d.id,createdAt:d.createdAt,updatedAt:new Date().toISOString()};return await k(c,`${i}${a}`,e),e}async function s(a){let b=g();return await b.delete(`${i}${a}`),!0}},8833:()=>{}},a=>{a.O(0,[656],()=>a(a.s=3567));var b=a.O();(_ENTRIES="undefined"==typeof _ENTRIES?{}:_ENTRIES)["middleware_app/api/contacts/[id]/route"]=b}]);
//# sourceMappingURL=route.js.map